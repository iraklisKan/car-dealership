{% extends "admin/change_list.html" %}
{% load i18n admin_urls static %}

{% block content %}
{{ block.super }}

<style>
/* Add delete button styling */
.delete-selected-btn {
    background-color: #ba2121;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    margin-left: 10px;
}
.delete-selected-btn:hover {
    background-color: #a41515;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Find the Save button
    var saveButton = document.querySelector('input[name="_save"]');
    
    if (saveButton) {
        // Create Delete button
        var deleteButton = document.createElement('button');
        deleteButton.type = 'button';
        deleteButton.className = 'delete-selected-btn';
        deleteButton.textContent = 'Delete Selected';
        
        deleteButton.onclick = function() {
            var checkboxes = document.querySelectorAll('input[name="_selected_action"]:checked');
            if (checkboxes.length === 0) {
                alert('Please select at least one item to delete.');
                return;
            }
            
            if (confirm('Are you sure you want to delete ' + checkboxes.length + ' item(s)?')) {
                // Set the action dropdown to delete
                var actionSelect = document.querySelector('select[name="action"]');
                if (actionSelect) {
                    // Find the delete option
                    for (var i = 0; i < actionSelect.options.length; i++) {
                        if (actionSelect.options[i].value.includes('delete')) {
                            actionSelect.selectedIndex = i;
                            break;
                        }
                    }
                    // Submit the form
                    var form = document.querySelector('#changelist-form');
                    if (form) {
                        form.submit();
                    }
                }
            }
        };
        
        // Insert after Save button
        saveButton.parentNode.insertBefore(deleteButton, saveButton.nextSibling);
    }
});
</script>
{% endblock %}
